# Нормалізація бази даних замовлень

## Початкова таблиця (ненормалізована)
Номер_замовлення | Назва_товару і кількість | Адреса_клієнта | Дата_замовлення | Клієнт
--- | --- | --- | --- | ---
101 | Лептоп: 3, Мишка: 2 | Хрещатик 1 | 2023-03-15 | Мельник  
102 | Принтер: 1 | Басейна 2 | 2023-03-16 | Шевченко  
103 | Миша: 4 | Комп'ютерна 3 | 2023-03-17 | Коваленко  

## 1. Перша нормальна форма (1НФ)
Щоб перейти до 1НФ, усуваємо багатозначний атрибут "Назва_товару і кількість", розбиваючи його на атомарні значення. Cтворюємо окремий рядок для кожного товару в замовленні.

**Таблиця в 1НФ:**
| Номер_замовлення | Назва_товару | Кількість | Адреса_клієнта | Дата_замовлення | Клієнт |
|---|---|---|---|---|---|
| 101 | Лептоп | 3 | Хрещатик 1 | 2023-03-15 | Мельник |
| 101 | Мишка | 2 | Хрещатик 1 | 2023-03-15 | Мельник |
| 102 | Принтер | 1 | Басейна 2 | 2023-03-16 | Шевченко |
| 103 | Мишка | 4 | Комп'ютерна 3 | 2023-03-17 | Коваленко |

## 2. Друга нормальна форма (2НФ)
Щоб перейти до 2НФ, усуваємо часткові залежності:
- Первинний ключ є складеним: `(Номер_замовлення, Назва_товару)`, тому всі атрибути повинні залежати від обох частин ключа.
- `Адреса_клієнта`, `Дата_замовлення`, `Клієнт` залежать лише від `Номер_замовлення`.
- `Кількість` залежить від обох `Номер_замовлення` та `Назва_товару`.

Розбиваємо таблицю на дві окремі таблиці: одну для замовлень і одну для деталей замовлень.

**Orders (проміжна):**
| order_id (PK) | order_date | client_name | client_address |
|---|---|---|---|
| 101 | 2023-03-15 | Мельник | Хрещатик 1 |
| 102 | 2023-03-16 | Шевченко | Басейна 2 |
| 103 | 2023-03-17 | Коваленко | Комп'ютерна 3 |

**Order_Details:**
| order_id (FK) | product_name (PK) | quantity |
|---|---|---|
| 101 | Лептоп | 3 |
| 101 | Мишка | 2 |
| 102 | Принтер | 1 |
| 103 | Мишка | 4 |

## 3. Третя нормальна форма (3НФ)
Щоб перейти до 3НФ, усуваємо транзитивні залежності.

У таблиці **Orders** `client_address` залежить від `client_name` (припускаючи, що адреса належить клієнту). Отже, `order_id` -> `client_name` -> `client_address`.

Створюємо окрему таблицю **Clients**.
Також створюємо окрему таблицю **Products** для ефективного управління назвами продуктів та призначення їм ідентифікаторів.

**Фінальні таблиці:**

**Clients**
| id (PK) | name | address |
|---|---|---|
| 1 | Мельник | Хрещатик 1 |
| 2 | Шевченко | Басейна 2 |
| 3 | Коваленко | Комп'ютерна 3 |

**Products**
| id (PK) | name |
|---|---|
| 1 | Лептоп |
| 2 | Мишка |
| 3 | Принтер |

**Orders**
| id (PK) | order_date | client_id (FK) |
|---|---|---|
| 101 | 2023-03-15 | 1 |
| 102 | 2023-03-16 | 2 |
| 103 | 2023-03-17 | 3 |

**Order_Details**
| id (PK) | order_id (FK) | product_id (FK) | quantity |
|---|---|---|---|
| 1 | 101 | 1 | 3 |
| 2 | 101 | 2 | 2 |
| 3 | 102 | 3 | 1 |
| 4 | 103 | 2 | 4 |
