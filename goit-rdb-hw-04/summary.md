# Резюме виконання домашнього завдання №4

В рамках цього домашнього завдання були виконані наступні кроки для закріплення навичок роботи з DDL, DML та складними SQL-запитами (JOIN, GROUP BY, HAVING).

## 1. Проектування БД бібліотеки (`LibraryManagement`)

Була спроектована та реалізована база даних "Бібліотека".

- **Файл:** `p1_create_db_tables.sql`
- **Схема:** `LibraryManagement`
- **Таблиці:**
  - `authors` (автори)
  - `genres` (жанри)
  - `books` (книги з Foreign Key на авторів та жанри)
  - `users` (читачі)
  - `borrowed_books` (облік видачі книг з зв'язками M:M між Users та Books)
- **Особливості:** Використано зв'язки `Foreign Key` для забезпечення цілісності даних.

## 2. Наповнення даними

Таблиці були заповнені тестовими даними.

- **Файл:** `p2_fulfill_tables.sql`
- **Дані:** Додано авторів (Андрухович, Жадан), жанри та відповідні книги. Також створено тестових користувачів та записи про видачу книг.

## 3. Робота з існуючою БД (`hw03`) та SQL-запити

Виконано ряд запитів до бази даних `hw03`, яка містить замовлення, товари, клієнтів тощо.

### 3.1 Об'єднання таблиць (JOIN)
- **Файл:** `p3_select_all_from_hw3.sql`
- **Завдання:** Об'єднати 8 таблиць (`orders`, `order_details`, `products`, `customers`, `employees`, etc.) для отримання повної інформації про замовлення.
- **Результат:** Зведена таблиця з усіма деталями без дублювання ID колонок.

### 3.2 Підрахунок рядків
- **Файл:** `p4.1_count_rows_from_hw3.sql`
- **Завдання:** Визначити кількість рядків після об'єднання.
- **Метод:** Використано `COUNT(*)`. Перевірено роботу `LEFT`, `RIGHT` та `INNER JOIN`.
- **Спостереження:** Кількість рядків (518) однакова для `INNER`, `LEFT` та `RIGHT JOIN`. Це зумовлено тим, що всі записи в таблиці `order_details` мають відповідні пов'язані записи в інших таблицях (foreign keys не містять NULL або неіснуючих посилань), тому тип з'єднання не вплинув на фінальну вибірку.

### 3.3 Фільтрація (WHERE)
- **Файл:** `p4.2_filter_by_employee.sql`
- **Завдання:** Вибрати замовлення, які оброблені працівниками з `employee_id > 3` та `employee_id <= 10`.

### 3.4 Групування (GROUP BY)
- **Файл:** `p4.3_group_by_category.sql`
- **Завдання:** Згрупувати замовлення за назвою категорії.
- **Агрегація:** Пораховано кількість рядків (`COUNT`) та середню кількість товару (`AVG(quantity)`) для кожної категорії.

### 3.5 Фільтрація груп (HAVING)
- **Файл:** `p4.4_having_avg_quantity.sql`
- **Завдання:** Відфільтрувати категорії, де середня кількість товару > 21.

### 3.6 Сортування
- **Файл:** `p4.5_having_avg_quantity_count_desc.sql`
- **Завдання:** Відсортувати результати за спаданням кількості рядків.

### 3.7 Пагінація (LIMIT / OFFSET)
- **Файл:** `p4.6_select_all_from_hw3_offset_limit.sql`
- **Завдання:** Вивести 4 рядки, пропустивши перший (`LIMIT 4 OFFSET 1`).
